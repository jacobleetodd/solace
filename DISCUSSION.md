## Initial reactions and notes

- The top level `page` component is a client component. This is necessary to use React hooks but defeats some of the purposes of using Next.js. At the very least, we should inject the initial data load on the server and move any component that require hooks down the tree. This would also eliminate the `useEffect` hook since the `page` will not load until the data has been fetched.
- This project is using TypeScript but the data and handler functions are not typed. This makes the developer experience worse and increases the likelihood of runtime errors from code such as `advocate.specialties.map` or `advocate.yearsOfExperience.includes(searchTerm)`.
- The code is rendering DOM elements within a map function without providing a key for each rendered child. This causes problems for the React reconciliation process since, without unique keys, all children will appear to be the same element type.
- Searching is being handled client side which means only the records returned from the original fetch will be included in the search results. Searching is typically handled by the server to ensure all results are returned and to properly handle pagination and sorting. The searching function is also case sensitive and users typically expect searching to be case insensitive. Finally, the search function is directly manipulating the search term label DOM. It is fine to use uncontrolled components in React but this is usually done with the help of form libraries such as `react-hook-form` or `tanstack-forms`. The more common solution is to make components controlled using React state which allows DOM updates within the React lifecycle and reconciliation process.
- There is no error handling for the API response. In addition, there is no zero or loading states for the table. Error and loading states can be handled in Next.js using `app/error` and `app/loading` components.
- It is a little strange to have state for both `advocates` and `filteredAdvocates` since `filteredAdvocates` is a subset of `advocates`. Neither of these states is necessary when using Next.js but, at the very least, we can eliminate `filteredAdvocates` state in favor of something like`getFilteredAdvocates(advocates)`.
- `<br />` tags are being used for spacing DOM elements. This is typically done using CSS solutions like margin / padding / flex / grid.
- Installing and using Material UI since this provides both styling and a component library and I am very familiar with it.
- Everything I read says drizzle-orm has excellent ts support but I'm seeing lots of errors and limited discoverability. It feels like there is a missing types package but from what I read typing should be native. Perhaps this is a setting in the tsconfig.

## Notes on my implementation

- I wanted to make the initial data load run on the server, as this seems to be the preferred pattern in Next.js, but this does complicate searching and pagination. The URL acts as global state for the Advocates view and it is a little wonky to keep the URL set correctly with handlers across several components. There is likely a better solution to this. Perhaps applications should rely on client side data fetching when the data needs to be dynamic.
- Pagination is working but the MUI DataGrid requires a total record count in order to properly display the remaining pages. For some reason the count field is coming back undefined in the app when no search term is provided. Count is populated and correct when using curl. I tried fixing this but was unable to identify the issue. I added the terrible hack of `rowCount={advocateResponse.count ?? 15}` for now. The page size is currently set to 5 since the size of the data set is limited.
- Searching works and will return partial case-insensitive matches from `firstName`, `lastName`, `city`, and `degree`. You need to type in the search field AND click the search icon button to the right to initiate a new search. A debounced search that is triggered by typing in the search field is preferred but, to my knowledge, this is only possible with client side queries. If you do a simple search like `j` you will return more than 5 results and pagination works here. Next steps would be to add a richer search experience with multiselect searching of specialties and greater than / less than searching of experience.
- You can view all of an advocate's specialties in a dialog by clicking the button in the table.
